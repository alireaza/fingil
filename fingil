#!/bin/bash
#Fingil writed by alireza.amirsamimi@ubuntu.ir and AliReaza

convert () {
    text=$@
    out=""

    for i in $(seq 0 $((${#text} - 1))); do
        hex=$(echo "${text:$i:1}" | xxd -p)

        case "$hex" in
            "270a") #'
                out="daaf0a" #گ
            ;;
            "280a") #(
                out="290a" #)
            ;;
            "290a") #)
                out="280a" #(
            ;;
            "2c0a") #,
                out="d9880a" #و
            ;;
            "300a") #0
                out="dbb00a" #۰
            ;;
            "310a") #1
                out="dbb10a" #۱
            ;;
            "320a") #2
                out="dbb20a" #۲
            ;;
            "330a") #3
                out="dbb30a" #۳
            ;;
            "340a") #4
                out="dbb40a" #۴
            ;;
            "350a") #5
                out="dbb50a" #۵
            ;;
            "360a") #6
                out="dbb60a" #۶
            ;;
            "370a") #7
                out="dbb70a" #۷
            ;;
            "380a") #8
                out="dbb80a" #۸
            ;;
            "390a") #9
                out="dbb90a" #۹
            ;;
            "3b0a") #;
                out="daa90a" #ک
            ;;
            "410a") #A
                out="d8a40a" #ؤ
            ;;
            "420a") #B
                out="e2808c0a" # نیم فاصله
            ;;
            "430a") #C
                out="da980a" #ژ
            ;;
            "440a") #D
                out="d98a0a" #ي
            ;;
            "450a") #E
                out="d98d0a" #ٍ
            ;;
            "460a") #F
                out="d8a50a" #إ
            ;;
            "470a") #G
                out="d8a30a" #أ
            ;;
            "480a") #H
                out="d8a20a" #آ
            ;;
            "490a") #I
                out="d9910a" #ّ
            ;;
            "4a0a") #J
                out="d8a90a" #ة
            ;;
            "4b0a") #K
                out="c2bb0a" #»
            ;;
            "4c0a") #L
                out="c2ab0a" #«
            ;;
            "4d0a") #M
                out="d8a10a" #ء
            ;;
            "4e0a") #N
                out="d9940a" #ٔ
            ;;
            "4f0a") #O
                out="5d0a" #]
            ;;
            "500a") #P
                out="5b0a" #[
            ;;
            "510a") #Q
                out="d9920a" #ْ
            ;;
            "520a") #R
                out="d98b0a" #ً
            ;;
            "530a") #S
                out="d8a60a" #ئ
            ;;
            "540a") #T
                out="d98f0a" #ُ
            ;;
            "550a") #U
                out="d98e0a" #َ
            ;;
            "560a") #V
                out="d9b00a" #ٰ
            ;;
            "570a") #W
                out="d98c0a" #ٌ
            ;;
            "580a") #X
                out="d9930a" #ٓ
            ;;
            "590a") #Y
                out="d9900a" #ِ
            ;;
            "5a0a") #Z
                out="d9830a" #ك
            ;;
            "5b0a") #[
                out="d8ac0a" #ج
            ;;
            "5d0a") #]
                out="da860a" #چ
            ;;
            "610a") #a
                out="d8b40a" #ش
            ;;
            "620a") #b
                out="d8b00a" #ذ
            ;;
            "630a") #c
                out="d8b20a" #ز
            ;;
            "640a") #d
                out="db8c0a" #ی
            ;;
            "650a") #e
                out="d8ab0a" #ث
            ;;
            "660a") #f
                out="d8a80a" #ب
            ;;
            "670a") #g
                out="d9840a" #ل
            ;;
            "680a") #h
                out="d8a70a" #ا
            ;;
            "690a") #i
                out="d9870a" #ه
            ;;
            "6a0a") #j
                out="d8aa0a" #ت
            ;;
            "6b0a") #k
                out="d9860a" #ن
            ;;
            "6c0a") #l
                out="d9850a" #م
            ;;
            "6d0a") #m
                out="d9be0a" #پ
            ;;
            "6e0a") #n
                out="d8af0a" #ن
            ;;
            "6f0a") #o
                out="d8ae0a" #خ
            ;;
            "700a") #p
                out="d8ad0a" #ح
            ;;
            "710a") #q
                out="d8b60a" #ض
            ;;
            "720a") #r
                out="d9820a" #ق
            ;;
            "730a") #s
                out="d8b30a" #س
            ;;
            "740a") #t
                out="d9810a" #ف
            ;;
            "750a") #u
                out="d8b90a" #ع
            ;;
            "760a") #v
                out="d8b10a" #ر
            ;;
            "770a") #w
                out="d8b50a" #ص
            ;;
            "780a") #x
                out="d8b70a" #ط
            ;;
            "790a") #y
                out="d8ba0a" #غ
            ;;
            "7a0a") #z
                out="d8b80a" #ظ
            ;;
            *)
                out="${hex}"
            ;;
        esac

        out=$(echo "$out" | xxd -p -r)
        echo -ne "$out"\\r
    done
}

window_pid=$(xdotool getactivewindow)
clipboard=$(xclip -o -sel clip )

xdotool type --delay 200 --window $window_pid "$(convert $clipboard)"

exit
