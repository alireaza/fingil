#!/bin/bash
#Figil writed by alireza.amirsamimi@ubuntu.ir
case_function_per (){
  case "$line" in
    "ض")
    xdotool type --window $window_pid "q"  ;;
    "ص")
    xdotool type --window $window_pid "w"  ;;
    "ث")
    xdotool type --window $window_pid "e"  ;;
    "ق")
    xdotool type --window $window_pid "r"  ;;
    "ف")
    xdotool type --window $window_pid "t"  ;;
    "غ")
    xdotool type --window $window_pid "y"  ;;
    "ع")
    xdotool type --window $window_pid "u"  ;;
    "ه")
    xdotool type --window $window_pid "i"  ;;
    "خ")
    xdotool type --window $window_pid "o"  ;;
    "ح")
    xdotool type --window $window_pid "p"  ;;
    "ج")
    xdotool type --window $window_pid "["  ;;
    "چ")
    xdotool type --window $window_pid "]"  ;;
    "ش")
    xdotool type --window $window_pid "a"  ;;
    "س")
    xdotool type --window $window_pid "s"  ;;
    "ی")
    xdotool type --window $window_pid "d"  ;;
    "ب")
    xdotool type --window $window_pid "f"  ;;
    "ل")
    xdotool type --window $window_pid "g"  ;;
    "ا")
    xdotool type --window $window_pid "h"  ;;
    "ت")
    xdotool type --window $window_pid "j"  ;;
    "ن")
    xdotool type --window $window_pid "k"  ;;
    "م")
    xdotool type --window $window_pid "l"  ;;
    "ک")
    xdotool type --window $window_pid ";"  ;;
    "گ")
    xdotool type --window $window_pid "'"  ;;
    "ظ")
    xdotool type --window $window_pid "z"  ;;
    "ط")
    xdotool type --window $window_pid "x"  ;;
    "ز")
    xdotool type --window $window_pid "c"  ;;
    "ر")
    xdotool type --window $window_pid "v"  ;;
    "ذ")
    xdotool type --window $window_pid "b"  ;;
    "د")
    xdotool type --window $window_pid "n"  ;;
    "پ")
    xdotool type --window $window_pid "m"  ;;
    "و")
    xdotool type --window $window_pid ","  ;;
    "ژ‍")
    xdotool type --window $window_pid "C"  ;;
    "۱")
    xdotool type --window $window_pid "1"  ;;
    "۲")
    xdotool type --window $window_pid "2"  ;;
    "۳")
    xdotool type --window $window_pid "3"  ;;
    "۴")
    xdotool type --window $window_pid "4"  ;;
    "۵")
    xdotool type --window $window_pid "5"  ;;
    "۶")
    xdotool type --window $window_pid "6"  ;;
    "۷")
    xdotool type --window $window_pid "7"  ;;
    "۸")
    xdotool type --window $window_pid "8"  ;;
    "۹")
    xdotool type --window $window_pid "9"  ;;
    "۰")
    xdotool type --window $window_pid "0"  ;;
    "")
    xdotool type --window $window_pid " "  ;;
    ")")
    xdotool type --window $window_pid "("  ;;
    "(")
    xdotool type --window $window_pid ")"  ;;
    "؟")
    xdotool type --window $window_pid "?"  ;;
    "٬")
    xdotool type --window $window_pid "@"  ;;
    "٪")
    xdotool type --window $window_pid "%"  ;;
    "×")
    xdotool type --window $window_pid "^"  ;;
    "،")
    xdotool type --window $window_pid "&"  ;;
    *)
    xdotool type --window $window_pid "$line"  ;;
  esac
}
case_function_en (){
  case $line in
    "q"|"Q")
    xdotool type --window $window_pid "ض"  ;;
    "w"|"W")
    xdotool type --window $window_pid "ص"  ;;
    "e"|"E")
    xdotool type --window $window_pid "ث"  ;;
    "r"|"R")
    xdotool type --window $window_pid "ق"  ;;
    "t"|"T")
    xdotool type --window $window_pid "ف"  ;;
    "y"|"Y")
    xdotool type --window $window_pid "غ"  ;;
    "u"|"U")
    xdotool type --window $window_pid "ع"  ;;
    "i"|"I")
    xdotool type --window $window_pid "ه"  ;;
    "o"|"O")
    xdotool type --window $window_pid "خ"  ;;
    "p"|"P")
    xdotool type --window $window_pid "ح"  ;;
    "[")
    xdotool type --window $window_pid "ج"  ;;
    "]")
    xdotool type --window $window_pid "چ"  ;;
    "a"|"A")
    xdotool type --window $window_pid "ش"  ;;
    "s"|"S")
    xdotool type --window $window_pid "س"  ;;
    "d"|"D")
    xdotool type --window $window_pid "ی"  ;;
    "f"|"F")
    xdotool type --window $window_pid "ب"  ;;
    "g"|"G")
    xdotool type --window $window_pid "ل"  ;;
    "h"|"H")
    xdotool type --window $window_pid "ا"  ;;
    "j"|"J")
    xdotool type --window $window_pid "ت"  ;;
    "k"|"K")
    xdotool type --window $window_pid "ن"  ;;
    "l"|"L")
    xdotool type --window $window_pid "م"  ;;
    ";")
    xdotool type --window $window_pid "ک"  ;;
    "'")
    xdotool type --window $window_pid "گ"  ;;
    "z"|"Z")
    xdotool type --window $window_pid "ظ"  ;;
    "x"|"X")
    xdotool type --window $window_pid "ط"  ;;
    "c")
    xdotool type --window $window_pid "ز"  ;;
    "v"|"V")
    xdotool type --window $window_pid "ر"  ;;
    "b"|"B")
    xdotool type --window $window_pid "ذ"  ;;
    "n"|"N")
    xdotool type --window $window_pid "د"  ;;
    "m"|"M")
    xdotool type --window $window_pid "پ"  ;;
    ",")
    xdotool type --window $window_pid "و"  ;;
    "C")
    xdotool type --window $window_pid "ژ"  ;;
    "1")
    xdotool type --window $window_pid "۱"  ;;
    "2")
    xdotool type --window $window_pid "۲"  ;;
    "3")
    xdotool type --window $window_pid "۳"  ;;
    "4")
    xdotool type --window $window_pid "۴"  ;;
    "5")
    xdotool type --window $window_pid "۵"  ;;
    "6")
    xdotool type --window $window_pid "۶"  ;;
    "7")
    xdotool type --window $window_pid "۷"  ;;
    "8")
    xdotool type --window $window_pid "۸"  ;;
    "9")
    xdotool type --window $window_pid "۹"  ;;
    "0")
    xdotool type --window $window_pid "۰"  ;;
    "?")
    xdotool type --window $window_pid "؟"  ;;
    "(")
    xdotool type --window $window_pid ")"  ;;
    ")")
    xdotool type --window $window_pid "("  ;;
    "")
    xdotool type --window $window_pid " "  ;;
    "@")
    xdotool type --window $window_pid "٬"  ;;
    "#")
    xdotool type --window $window_pid "٫"  ;;
    "%")
    xdotool type --window $window_pid "٪"  ;;
    "^")
    xdotool type --window $window_pid "×"  ;;
    "&")
    xdotool type --window $window_pid "،"  ;;
    *)
    xdotool type --window $window_pid "$line"  ;;
  esac
}
window_pid=$(xdotool getactivewindow)
#copy clipboard

 
clipboard=$(xclip -out )
#Spliting clipbord to letters and saving them in a text file in seperate lines
echo $clipboard | grep -o . > /tmp/fingil.txt
#checking encoding of file.utf8 is for persian.
encode_type=$(file -bi /tmp/fingil.txt)
#reading text file lines and converting them
sleep 1
while read -r line;do
  if [ "$encode_type" == "text/plain; charset=utf-8" ];then
    case_function_per
  else
    case_function_en
  fi
done < /tmp/fingil.txt

exit
